<head>
  <title>implicit-auth</title>
</head>
<body>
  <h1>Implicit Auth</h1>
  <script>
      var application = "dashboard";
      var vendor = "agarciamog.github.io";
      var client_id = application + "@" + vendor;
      var implicitURI = "https://api.incontact.com/InContactAuthorizationServer/Authenticate";
      var token_scope = "AdminApi AgentApi RealTimeDataAPI ReportingAPI";
      var redirect_uri = "https://agarciamog.github.io/incontact-dashboard/authenticated";
      var state_object = "myState";

      function RedirectToAuthPage() {
        var url = implicitURI;
        url = url + "?state=" + state_object;
        url = url + "&response_type=token";
        url = url + "&client_id=" + encodeURIComponent(client_id);
        url = url + "&redirect_uri=" + encodeURIComponent(redirect_uri);
        url = url + "&scope=" + encodeURIComponent(token_scope);
        window.location.href = url;
      }

      RedirectToAuthPage();

      $(function () {
        var query_string = {};
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            query_string[pair[0]] = pair[1];
        }
        if (typeof(query_string.access_token) != "undefined") {
            result.state = query_string.state;
            result.scope = query_string.scope;
            result.access_token = query_string.access_token;
            result.expires_in = query_string.expires_in;
            result.resource_server_base_uri = query_string.resource_server_base_uri;
            result.token_type = query_string.token_type;
        }
      });
  </script>

</body>
